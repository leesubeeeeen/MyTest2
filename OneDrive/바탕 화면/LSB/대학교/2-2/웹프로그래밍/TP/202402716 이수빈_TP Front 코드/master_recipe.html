<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë§ŒëŠ¥ë ˆì‹œí”¼ | ì¬ë£Œì…ë ¥</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- ìƒë‹¨ ë¸Œëœë“œ ë°” -->
<header class="topbar">
  <a href="master_recipe.html" class="brand-wrap">
    <img src="logo.png" alt="ë¡œê³ " class="logo">
    <h1 class="brand">ë§ŒëŠ¥ë ˆì‹œí”¼</h1>
  </div>
  <a href="login.html" class="login-link">ë¡œê·¸ì¸/íšŒì›ê°€ì…</a>
</header>


  <!-- 2ë‹¨ ë‚´ë¹„ê²Œì´ì…˜ -->
  <nav class="tabbar">
    <a class="tab active" href="master_recipe.html">ì¬ë£Œì…ë ¥</a>
    <a class="tab" href="popular_recipe.html">ì˜¤ëŠ˜ì˜ ì¸ê¸° ë ˆì‹œí”¼</a>
    <a class="tab" href="mypage.html">ë§ˆì´í˜ì´ì§€</a>
    <a class="tab" href="support.html">ê³ ê°ì§€ì›</a>
  </nav>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <main class="container">
    <section class="hero">
      <!-- ì œëª© + ê²€ìƒ‰ì°½ í•œ ì¤„ -->
<div class="title-row">
      <h2 class="page-title">ì¬ë£Œ ì…ë ¥</h2>

      <div class="searchbar long" id="openModal">
        <span class="icon">ğŸ”</span>
        <input
          type="text"
          class="search-input"
          placeholder="Search"
          aria-label="ê²€ìƒ‰ì–´ ì…ë ¥"
          readonly
        />
      </div>
    </div>


      <!-- ì¬ë£Œ ë°•ìŠ¤ -->
      <div class="ingredient-box" id="ingredientBox">
        <!-- ì„ íƒëœ ì¬ë£Œë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
        <div class="edit-buttons hidden" id="editButtons">
          <button id="editBtn" class="btn-small">ìˆ˜ì •</button>
          <button id="clearBtn" class="btn-small">ì‚­ì œ</button>
        </div>
      </div>

      <!-- ê²€ìƒ‰ ë²„íŠ¼ -->
      <div class="cta">
        <a href="results.html" class="btn-primary">ë ˆì‹œí”¼ ê²€ìƒ‰í•˜ê¸°</a>
      </div>
    </section>
  </main>

  <!-- ==================== ëª¨ë‹¬ ==================== -->
  <div class="modal hidden" id="ingredientModal">
    <div class="modal-content">
      <!-- ìƒë‹¨ ì…ë ¥ì°½ -->
      <div class="modal-header">
        <div class="modal-search">
          <span class="icon">ğŸ”</span>
          <input id="ingredientInput" type="text" placeholder="ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (Enter)" />
        </div>
        <button class="btn-close" id="closeModal">âœ–</button>
      </div>

      <hr class="modal-line" />

      <!-- ì…ë ¥ëœ ì¬ë£Œ ë¦¬ìŠ¤íŠ¸ -->
      <div class="tag-container" id="tagContainer"></div>

      <!-- ì™„ë£Œ ë²„íŠ¼ -->
      <div class="modal-footer">
        <button id="finishInput" class="btn-finish">ì…ë ¥ ì™„ë£Œ</button>
      </div>
    </div>
  </div>

  <script>
    // ---------------- ë¡œê·¸ì¸ ìˆ¨ê¹€ ----------------
    const isLoggedIn = false;
    const loginLink = document.getElementById("loginLink");
    if (isLoggedIn) loginLink.style.display = "none";

    // ---------------- ëª¨ë‹¬ ì—´ê³  ë‹«ê¸° ----------------
    const openModalBtn = document.getElementById("openModal");
    const closeModalBtn = document.getElementById("closeModal");
    const modal = document.getElementById("ingredientModal");
    const finishBtn = document.getElementById("finishInput");

    openModalBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });
    closeModalBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });
    finishBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
      renderMainTags(); // ì…ë ¥ ì™„ë£Œ ì‹œ ë©”ì¸ì— ë°˜ì˜
    });

    // ---------------- ì¬ë£Œ ì¶”ê°€/ì‚­ì œ ----------------
    const input = document.getElementById("ingredientInput");
    const tagContainer = document.getElementById("tagContainer");
    const ingredientBox = document.getElementById("ingredientBox");
    const editButtons = document.getElementById("editButtons");

    let ingredients = [];

    input.addEventListener("keypress", (e) => {
      if (e.key === "Enter" && input.value.trim() !== "") {
        e.preventDefault();
        const ingredient = input.value.trim();
        if (!ingredients.includes(ingredient)) {
          ingredients.push(ingredient);
          renderTags();
        }
        input.value = "";
      }
    });

    function renderTags() {
      tagContainer.innerHTML = "";
      ingredients.forEach((item) => {
        const tag = document.createElement("div");
        tag.classList.add("tag");
        tag.innerHTML = `${item} <span class="remove">âœ–</span>`;
        tag.querySelector(".remove").addEventListener("click", () => {
          ingredients = ingredients.filter((ing) => ing !== item);
          renderTags();
        });
        tagContainer.appendChild(tag);
      });
    }

    // ---------------- ë©”ì¸ ë°˜ì˜ ----------------
    function renderMainTags() {
      ingredientBox.innerHTML = "";
      if (ingredients.length > 0) {
        ingredients.forEach((item) => {
          const mainTag = document.createElement("div");
          mainTag.classList.add("tag", "main-tag");
          mainTag.textContent = item;
          ingredientBox.appendChild(mainTag);
        });
        ingredientBox.appendChild(editButtons);
        editButtons.classList.remove("hidden");
      } else {
        editButtons.classList.add("hidden");
      }
    }

    // ---------------- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ ----------------
    const editBtn = document.getElementById("editBtn");
    const clearBtn = document.getElementById("clearBtn");

    editBtn.addEventListener("click", () => {
      modal.classList.remove("hidden");
    });

    clearBtn.addEventListener("click", () => {
      ingredients = [];
      ingredientBox.innerHTML = "";
      editButtons.classList.add("hidden");
    });
  </script>
</body>
</html>
